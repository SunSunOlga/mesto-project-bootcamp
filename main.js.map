{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-bootcamp/webpack/bootstrap","webpack://mesto-project-bootcamp/webpack/runtime/define property getters","webpack://mesto-project-bootcamp/webpack/runtime/hasOwnProperty shorthand","webpack://mesto-project-bootcamp/./src/components/constants.js","webpack://mesto-project-bootcamp/./src/components/section.js","webpack://mesto-project-bootcamp/./src/components/api.js","webpack://mesto-project-bootcamp/./src/components/card.js","webpack://mesto-project-bootcamp/./src/components/profile.js","webpack://mesto-project-bootcamp/./src/pages/script.js","webpack://mesto-project-bootcamp/./src/components/modal.js","webpack://mesto-project-bootcamp/./src/components/validate.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","//попап для отображения изображения\n//const photoFigure = photoPopup.querySelector(\".photo__figure\");\n//const buttonPhotoClose = photoPopup.querySelector(\".js-close-photo\");\n//кнопка закрытия формы профиля\n//const buttonCloseProfile = document.querySelector(\".js-close-form\");\n\n\n//cоздадим объект для: классов/объектов/селекторов(чтобы исчезла привязка)\nexport const configValidation = {\n  //cелектор,по которому выбираются формы(первое свойство)\n  formSelector: \".form\",\n  //чтобы выбрать все инпуты b тд\n  inputFieldSelector: \".form__field\",\n  buttonSubmitSelector: \".form__button-save\",\n  inputErrorClass: \"form__field_active\",\n};\n\n//массив\n/* export const initialCards = [\n  {\n    name: \"Архыз\",\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg\",\n  },\n  {\n    name: \"Челябинская область\",\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg\",\n  },\n  {\n    name: \"Иваново\",\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg\",\n  },\n  {\n    name: \"Камчатка\",\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg\",\n  },\n  {\n    name: \"Холмогорский район\",\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg\",\n  },\n  {\n    name: \"Байкал\",\n    link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg\",\n  },\n]; */\n","export const itemSection = document.querySelector(\".elements-grid\");\n\nexport function addItem(newItem) {\n  itemSection.prepend(newItem);\n}\n\n","//модуль,отвечающий за работу с сервером\n\nconst config = {\n  baseUrl: 'https://nomoreparties.co/v1/wbf-cohort-7',\n  headers: {\n    authorization: '5c0ea949-1e0d-409c-aab2-ad8dda3585dc',\n    'Content-Type': 'application/json'\n  }\n}\n\nfunction checkResponse(res) {\n    //получили ответ,если ок,то взяли json==>на этом апи заканчивается,берет json/общение между нами и сервером\n    if (res.ok) {\n      return res.json();\n    }\n    // если ошибка, отклоняем промис//возвращаем промисы через которые then получаем данные\n    return Promise.reject(`Ошибка: ${res.status}`);\n}\n\nexport const getCards = () => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n    method: \"GET\",\n  })\n  .then(checkResponse)\n}\n\nexport const setCards = (data) => {\n  return fetch(`${config.baseUrl}/cards`, {\n    headers: config.headers,\n    method: \"POST\",\n    body: JSON.stringify(data)\n      //чтобы передеать данные нам нужны обратные действия,т.е нужно наш объект преобразовать в строку(тот объект,который сервер поймет)\n  })\n    .then(checkResponse);\n}\n\n //для удаления нужно id,чтобы понимать что именно удалять\nexport const deleteCards = (id) => {\n  //если операции с одним каким-то элементом ,то в путь добавляем его id\n  return fetch(`${config.baseUrl}/cards/${id}`, {\n    headers: config.headers,\n    method: \"DELETE\"\n  })\n  .then(checkResponse)\n}\n\n\nexport const getProfileServer = () => {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n    method: \"GET\",\n  })\n  .then(checkResponse)\n}\n\nexport function patchProfile(data) {\n  return fetch(`${config.baseUrl}/users/me`, {\n    headers: config.headers,\n    method: \"PATCH\",\n    body: JSON.stringify(data)\n})\n.then(checkResponse)\n}\n\nexport function setLike(id) {\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\n    headers: config.headers,\n    method: \"PUT\",\n})\n.then(checkResponse)\n}\n\nexport function deleteLike(id) {\n  return fetch(`${config.baseUrl}/cards/likes/${id}`, {\n    headers: config.headers,\n    method: \"DELETE\",\n})\n.then(checkResponse)\n}\n\nexport function patchAvatar(data) {\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\n    headers: config.headers,\n    method: \"PATCH\",\n    body: JSON.stringify(data)\n})\n.then(checkResponse)\n}\n\n\n\n\n\n\n","import {\n  openFormCards,\n  closePopup,\n  itemSection,\n  cardItem,\n} from \"./modal\";\nimport { toggleButton } from \"./validate\";\nimport { deleteCards, deleteLike, setLike } from \"./api\";\nimport { userId, initialInfo,openPhoto } from \"../pages/script\";\n\nconst itemTemplate = document\n  .querySelector(\".item-template\")\n  .content.querySelector(\".element\");\n\n//удаление карточки\nexport function deleteItem(event) {\n  event.target.closest(\".element\").remove();\n}\n\n//перенос объектов из модального окна и образование карточек\nexport function createItem(card, userId) {\n  //template для карточек и разметка для них\n  const cardItem = document.querySelector(\".element\");\n  //const cardNewElement = itemTemplate.cloneNode(true);\n  const newItemCard = itemTemplate.cloneNode(true);\n  const itemName = newItemCard.querySelector(\".element__caption\");\n  const itemPicture = newItemCard.querySelector(\".element__picture\");\n  const buttonLikeCard = newItemCard.querySelector(\".js-like-element\");\n  const buttonDeleteCard = newItemCard.querySelector(\".js-delete-element\");\n  const itemNumberLike = newItemCard.querySelector(\".element__number-like\");\n\n\n  //делаем контейнер и перенос данных\n  itemName.textContent = card.name;\n  itemPicture.src = card.link;\n  itemPicture.alt = card.name;\n  //возвращаем вол-во элементов в массиве\n  itemNumberLike.textContent = card.likes.length;\n\n\n  function openItem(evt) {\n    openPhoto({ name: evt.target.alt, link: evt.target.src });\n  }\n\n  if (userId === card.owner._id) {\n    buttonDeleteCard.addEventListener(\"click\", (evt) => {\n      deleteCards(card._id)\n      .then(deleteItem(evt))\n      .catch((err) => {\n        console.log(err);\n      })\n    })\n  } else {\n    buttonDeleteCard.remove();\n  }\n\n/* const massivLikes = card.likes;\nmassivLikes.array.forEach(element => {\n  if (element._id === userId)\n});\n */\nbuttonLikeCard.likes = card.likes.map((el) =>{ return el._id})\n\nif (containLikesMy(buttonLikeCard.likes)) buttonLikeCard.classList.toggle(\"element__button-like_active\");\n\n  function containLikesMy(likes) {\n    //используем метод includes,чтобы убедитьсяб,что объект находится в массиве\n    return likes.includes(userId);\n  }\n\n  buttonLikeCard.addEventListener(\"click\", (event) => {\n    //здесь мы берем результат(res) и из него по новой запрашиваем сколько у нас лайков и проставляем кол-во\n    function changeLikeSection(res) {\n      event.target.likes = res.likes.map((el) => {\n        return el._id;\n      });\n      event.target.classList.toggle(\"element__button-like_active\");\n      itemNumberLike.textContent = event.target.likes.length;\n    }\n\n    //установка или удаление лайков как запрос из апи,в then прописываем обновление самого лайка\n    if (containLikesMy(event.target.likes)) {\n      deleteLike(card._id)\n      //в then всегда получаем новый массив,поэтому в ф-ции changeLikeSection\n        .then(changeLikeSection)\n        .catch((err) => {\n          console.log(err);\n        });\n    } else {\n      setLike(card._id)\n        .then(changeLikeSection)\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  });\n\n  //слушатели на фотографии\n  itemPicture.addEventListener(\"click\", openItem);\n\n  return newItemCard;\n}\n\n//itemSection.append(cardNewElement)\n","import { getProfileServer } from \"../components/api\"\n\nconst nameProfileHtml = document.querySelector(\".js-name-profile\");\nconst jobProfileHtml = document.querySelector(\".js-job-profile\");\nconst avatarProfile = document.querySelector(\".profile__image\");\n\nexport function getProfileInfo() {\n  return {name: nameProfileHtml.textContent, about: jobProfileHtml.textContent};\n  }\n\nexport function changeProfileInfo({name,about}) {\n\n    nameProfileHtml.textContent = name;\n    jobProfileHtml.textContent = about;\n\n  }\n\n  export function setAvatar({avatar}) {\n    avatarProfile.src = avatar;\n  }\n","import \"./index.css\";\n\nimport { configValidation } from \"../components/constants\";\n\nimport { enableValidation } from \"../components/validate\";\n\nimport { createItem, buttonDeleteCard, deleteItem } from \"../components/card\";\n\nimport { addItem, itemSection } from \"../components/section\";\n\nimport {\n  getCards,\n  setCards,\n  getProfileServer,\n  patchProfile,\n  getAvatarServer,\n} from \"../components/api\";\n\nimport {\n  changeProfileInfo,\n  getProfileInfo,\n  setAvatar,\n} from \"../components/profile\";\n\nimport { cardItem, openPopup, closePopup } from \"../components/modal\";\n\nlet userId;\n\n//нам нужно,что когда мы получили карточки,то профиль уже был.тк объект,который приходит с карточек,то нам нужно отличать свои карточки от чужих//будем сравнивать owner,id с id текущего пользователя\nexport function initialInfo() {\n  //показываем,что оба запроса выполнились(успешно)//в массиве мб неограниченное кол-во запросов,которые будут выполняться в промисе\n  //из запросов функций создаем массив\n  //деструктиризация кода-когда сложный объект разбираешь на части сразу присваивая значения отдельным переменным\n  //ф-ция,которая возвращает промис,потому вызыввем ф-ции внутри\n  Promise.all([getCards(), getProfileServer()])\n    //два результата также в массиве\n    //then это функция(лямбда)\n    .then(([cards, user]) => {\n      const { _id } = user;\n      userId = user._id;\n      changeProfileInfo(user);\n      setAvatar(user);\n      //cейчас получаем карточку\n      cards.reverse().forEach((card) => {\n        addItem(createItem(card, userId));\n      });\n    })\n    .catch((err) => {\n      console.log(err);\n    });\n}\ninitialInfo();\n\n//включаем валидации,настройки передаем при вызове\nenableValidation(configValidation);\n\n\n//редактирование профиля\nconst buttonEditProfile = document.querySelector(\".js-edit-profile\");\nconst blockPopupProfile = document.querySelector(\".popup-profile\");\n//модальное окно для профиля\nconst profilePopup = document.querySelector(\".popup-profile\");\nconst formProfile = blockPopupProfile.querySelector(\".js-form-profile\");\nconst nameInputProfile = formProfile.querySelector(\".js-input-name\");\nconst jobInputProfile = formProfile.querySelector(\".js-input-job\");\n\n//модальное окно для карточек\nconst cardsPopup = document.querySelector(\".popup-cards\");\n//форма карточек\nconst formCards = cardsPopup.querySelector(\".js-form-cards\");\n\nconst itemForm = document.querySelector(\".js-form-cards\");\nconst inputCardName = itemForm.querySelector(\".js-input-text-card\");\nconst inputCardLink = itemForm.querySelector(\".js-input-link-card\");\n//кнопка сохранить у формы места\nconst buttonAddCard = itemForm.querySelector(\".js-save-card\");\n\n//сабмит для карточки\nitemForm.addEventListener(\"submit\", function (event) {\n  event.preventDefault();\n  //добавляем ф-цию,передаем туда данные из поля ввода\n  loadingButtonCaption(buttonAddCard, \"Создание...\");\n  setCards({ name: inputCardName.value, link: inputCardLink.value })\n    //сервер вернул нам ответ//из него взяли name и link и создали карточку\n    .then((card, userId) => {\n      const newItem = createItem(card, userId);\n      addItem(newItem);\n      closePopup(cardsPopup);\n      itemForm.reset();\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally(() => {\n      loadingButtonCaption(buttonAddCard, \"Создать\");\n    });\n});\n\n//попап для отображения изображения\nconst photoPopup = document.querySelector(\".popup-photos\");\nconst photoImg = photoPopup.querySelector(\".popup__photo\");\nconst photoFigaption = photoPopup.querySelector(\".popup__figaption\");\n//открыть фото\nexport function openPhoto({ name, link }) {\n  photoFigaption.textContent = name;\n  photoImg.src = link;\n  photoImg.alt = name;\n  openPopup(photoPopup);\n}\n\nconst buttonOpenCard = document.querySelector(\".profile__button-add\");\n//открытие попапа для карточек\nexport function openFormCards() {\n  if (formCards.checkValidity()) {\n    buttonAddCard.disabled = false;\n  } else {\n    buttonAddCard.disabled = true;\n  }\n  openPopup(cardsPopup);\n}\nbuttonOpenCard.addEventListener(\"click\", openFormCards);\n\n//открытие попапа профиля\nexport function openFormProfile() {\n  if (formProfile.checkValidity()) {\n    buttonAddCard.disabled = false;\n  } else {\n    buttonAddCard.disabled = true;\n  }\n  const { name, about } = getProfileInfo();\n  nameInputProfile.value = name;\n  jobInputProfile.value = about;\n\n  openPopup(profilePopup);\n}\nbuttonEditProfile.addEventListener(\"click\", openFormProfile);\n\nconst buttonSubmitProfile = formProfile.querySelector(\".js-save-form\");\n\n//сабмит для профиля\nexport function handleProfileFormSubmit(evt) {\n  evt.preventDefault();\n  loadingButtonCaption(buttonSubmitProfile, \"Сохранение...\");\n\n  patchProfile({ name: nameInputProfile.value, about: jobInputProfile.value })\n    .then((user) => {\n      changeProfileInfo(user);\n      closePopup(blockPopupProfile);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally(() => {\n      loadingButtonCaption(buttonSubmitProfile, \"Сохранить\");\n    });\n}\nformProfile.addEventListener(\"submit\", handleProfileFormSubmit);\n\n//меняем текст у кнокпи\nexport function loadingButtonCaption(button, caption) {\n  button.textContent = caption;\n}\n\n//редактирование аватара\nconst avatarPopup = document.querySelector(\".popup-avatar\");\nconst formAvatar = avatarPopup.querySelector(\".js-form-avatar\");\nconst inputAvatar = formAvatar.querySelector(\".js-input-link-avatar\");\nconst buttonChangeAvatar = document.querySelector(\".profile__button-avatar\");\nconst buttonSaveAvatar = formAvatar.querySelector(\".js-save-avatar\");\n\n//открытие попапа аватара\nexport function openFormAvatar() {\n  if (formAvatar.checkValidity()) {\n    buttonAddCard.disabled = false;\n  } else {\n    buttonAddCard.disabled = true;\n  }\n  openPopup(avatarPopup);\n}\nbuttonChangeAvatar.addEventListener(\"click\", openFormAvatar);\n\n//сабмит для аватара\nfunction handleAvatarFormSubmit(event) {\n  event.preventDefault();\n  loadingButtonCaption(buttonSaveAvatar, \"Сохранение...\");\n\n  patchAvatar({ avatar: inputAvatar.value })\n    .then((avatar) => {\n      setAvatar(avatar);\n      closePopup(avatarPopup);\n    })\n    .catch((err) => {\n      console.log(err);\n    })\n    .finally(() => {\n      loadingButtonCaption(buttonSaveAvatar, \"Сохранить\");\n    });\n}\n\nformAvatar.addEventListener(\"submit\", handleAvatarFormSubmit);\n\n\n\n\n\n\n\n\n\n\n\n\n/* ////используем модуль\ngetCards()\n  //нужно подождать данные прежде,чем получить-выполнить действие только, когда сервер вернет данные\n  .then((res) => {\n    //console.log(res)\n    //массив рес//перебрали каждый элемент,взяли из объектов name и link и передали ф-цию createItem\n    res.forEach((arrayItem) => {\n      const newItem = createItem({\n        name: arrayItem.name,\n        link: arrayItem.link,\n      });\n      addItem(newItem);\n    });\n  });\n */\n\n/* //выносим массив в секцию для карт\ninitialCards.forEach((arrayItem) => {\n  const newItem = createItem(arrayItem);\n  addItem(newItem);\n}); */\n\n/* //обработка необработанного отклонения промисов\nwindow.addEventListener(\"unhandledrejection\", (evt) => {\n  console.error(\"Необработанная ошибка.\\nМесто возникновения: \");\n  console.error(evt.promise);\n  console.error(\"Информация об ошибке:\");\n  console.error(evt.reason);\n}); */\n","import { configValidation } from \"./constants\";\nimport {\n  checkValid,\n  toggleButton,\n  showError,\n  hideError,\n  setEventListener,\n  checkValidity,\n} from \"./validate\";\nimport { addItem } from \"../components/section\";\nimport { createItem } from \"./card\";\nimport { getProfileInfo, changeProfileInfo, setAvatar } from \"./profile\";\nimport { setCards, patchProfile, patchAvatar } from \"./api\";\n\n\n//открытие попапов\nexport function openPopup(popup) {\n  popup.classList.add(\"popup_opened\");\n  //добавили класс попапа и обработчик Esc\n  document.addEventListener(\"keydown\", closePopupEsc);\n  //аналогично с кликом\n  popup.addEventListener(\"click\", closePopupClick);\n}\n\n//закрытие на эск\nexport function closePopupEsc(evt) {\n  if (evt.key === \"Escape\") {\n    //находим отркеытое модальное окно,которое потом бдуем передовать аргументом\n    const openedPopup = document.querySelector(\".popup_opened\");\n    closePopup(openedPopup);\n  }\n}\n//закрытие на клик\nexport function closePopupClick(evt) {\n  if (evt.currentTarget === evt.target) {\n    closePopup(evt.currentTarget);\n  }\n}\n\n//закрытие попапов и все кнопки с крестиком\nexport function closePopup(popup) {\n  popup.classList.remove(\"popup_opened\");\n  document.removeEventListener(\"keydown\", closePopupEsc);\n  popup.removeEventListener(\"click\", closePopupClick);\n}\nconst closeButtons = document.querySelectorAll(\".popup__button-close\");\ncloseButtons.forEach((button) => {\n  const popup = button.closest(\".popup\");\n\n  button.addEventListener(\"click\", () => closePopup(popup));\n});\n\n\n","import { configValidation } from \"../components/constants\";\nimport { openPopup } from \"../components/modal\";\n\n//найдем спан,в котором показывает ошибку/выводим текст ошибки/передали .validationMessage\nexport function showError(formElement, inputElement, errorMessage, config) {\n  const errorField = formElement.querySelector(\"#error-\" + inputElement.id);\n  errorField.textContent = errorMessage;\n  inputElement.classList.add(config.inputErrorClass);\n}\n\n//очищаем текст ошибки\nexport function hideError(formElement, inputElement, config) {\n  const ErrorField = formElement.querySelector(\"#error-\" + inputElement.id);\n  ErrorField.textContent = \"\";\n  inputElement.classList.remove(config.inputErrorClass);\n}\n//проверям-есть поле или нет/принимаем в параметры форму(проброс функции через эту)\nexport function checkValid(formElement, inputElement, config) {\n  if (inputElement.validity.valid) {\n    hideError(formElement, inputElement, config);\n  } else {\n    showError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      config\n    ); //взяли из инпута\n  }\n}\n\n//проверем валидна форма или нет\nexport function toggleButton(formElement, buttonSubmitForm) {\n  if (formElement.checkValidity()) {\n    buttonSubmitForm.disabled = false;\n  } else {\n    buttonSubmitForm.disabled = true;\n  }\n}\n\nexport function setEventListener(formElement, config) {\n  //проверяем инфу в момент реального времени,валидация полей/цикл,который вешает слушатель на любой инпут\n  const inputList = formElement.querySelectorAll(config.inputFieldSelector);\n  const buttonSubmitForm = formElement.querySelector(\n    config.buttonSubmitSelector\n  );\n  toggleButton(formElement, buttonSubmitForm);\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkValid(formElement, inputElement, config);\n      // записать функцию для активности доступа кнопки\n      toggleButton(formElement, buttonSubmitForm);\n    });\n  });\n}\n//в эту функцию примем объект с настройками(конфигуратор)\nexport function enableValidation(config) {\n  const formList = document.querySelectorAll(config.formSelector);\n  formList.forEach((formElement) => {\n    setEventListener(formElement, config); //пробрасываем конфиг в дргуие функции\n  });\n}\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","itemSection","document","querySelector","addItem","newItem","prepend","config","baseUrl","headers","authorization","checkResponse","res","ok","json","Promise","reject","concat","status","itemTemplate","content","createItem","card","userId","newItemCard","cloneNode","itemName","itemPicture","buttonLikeCard","buttonDeleteCard","itemNumberLike","containLikesMy","likes","includes","textContent","name","src","link","alt","length","owner","_id","addEventListener","evt","event","id","fetch","method","then","target","closest","remove","catch","err","console","log","map","el","classList","toggle","changeLikeSection","setLike","openPhoto","nameProfileHtml","jobProfileHtml","avatarProfile","changeProfileInfo","_ref","about","setAvatar","_ref2","avatar","openPopup","popup","add","closePopupEsc","closePopupClick","closePopup","currentTarget","removeEventListener","toggleButton","formElement","buttonSubmitForm","checkValidity","disabled","querySelectorAll","forEach","button","all","cards","user","reverse","formSelector","inputList","inputFieldSelector","buttonSubmitSelector","inputElement","validity","valid","inputErrorClass","hideError","errorMessage","showError","validationMessage","checkValid","setEventListener","enableValidation","buttonEditProfile","blockPopupProfile","profilePopup","formProfile","nameInputProfile","jobInputProfile","cardsPopup","formCards","itemForm","inputCardName","inputCardLink","buttonAddCard","data","preventDefault","loadingButtonCaption","value","body","JSON","stringify","reset","finally","photoPopup","photoImg","photoFigaption","_ref3","_getProfileInfo","buttonSubmitProfile","caption","avatarPopup","formAvatar","inputAvatar","buttonChangeAvatar","buttonSaveAvatar","patchAvatar"],"sourceRoot":""}